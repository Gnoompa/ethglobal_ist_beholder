{"version":3,"file":"bundled/chunk.2304.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASsB;AAC0C;AAOzD,SAASS,kBAAkBC,KAA6B;IAC3D,MAAMC,IAAIH,4CAAkBA;IAC5B,MAAM,EAAEI,OAAO,EAAEC,WAAW,EAAE,GAAGH;IACjC,qBACI;;0BACI,oBAACL,0BAAWA;0BAAEM,EAAEG,+BAA+B;;0BAC/C,qBAACP,4BAAaA;;oBACTK,SAASG,uBACN,oBAACd,mBAAIA;wBAACe,KAAK;wBAACC,yBAAW,oBAACb,4BAAaA;sCAAEO,EAAEO,YAAY;;kCAChDN,SAASO,IAAI,CAACC,QAAQC,oBACnB,oBAACnB,wBAAQA;0CACL,kCAACC,2BAAYA;oCAACmB,SAASF;;+BADZC;yBAKvB;oBACHR,aAAaE,uBACV,oBAACd,mBAAIA;wBAACe,KAAK;wBAACC,yBAAW,oBAACb,4BAAaA;sCAAEO,EAAEY,kBAAkB;;kCACtDV,aAAaM,IAAI,CAACK,YAAYH,oBAC3B,oBAACnB,wBAAQA;0CACL,kCAACC,2BAAYA;oCAACmB,SAASE;;+BADZH;yBAKvB;;;0BAER,qBAACf,4BAAaA;;kCACV,oBAACN,qBAAMA;wBAACyB,SAASf,MAAMgB,QAAQ;wBAAEC,SAAQ;kCACpChB,EAAEiB,MAAM;;kCAEb,oBAAC5B,qBAAMA;wBAACyB,SAASf,MAAMmB,gBAAgB;wBAAEF,SAAQ;kCAC5ChB,EAAEmB,OAAO;;;;;;AAK9B;;;;ACrDmC;AACF;AACa;AACL;AACiB;AAG1D,MAAMK,wBAAgE;IAClE;IACA;IACA;IACA;CACH;AACD,SAASC,sBAAsBC,CAAS;IACpC,OAAO,sBAAoCC,QAAQ,CAACD;AACxD;AAEe,SAASE;IACpB,MAAMC,WAAWP,4BAAWA;IAC5B,MAAMQ,SAAS,IAAIC,gBAAgBF,SAASG,MAAM;IAClD,MAAM/B,UAAU6B,OAAOG,MAAM,CAAC;IAC9B,MAAM/B,cAAc4B,OAAOG,MAAM,CAAC,eAAeC,MAAM,CAACT;IAExD,MAAM,EAAEU,KAAK,EAAEC,OAAOC,aAAa,EAAE,GAAGd,gCAAaA,CACjD,IAAMe,QAAQpC,WAAW,CAACqC,QAAQ,CAAC;YAAEtC;YAASC;QAAY,IAC1D;QAAC2B,SAASG,MAAM;KAAC;IAGrBX,mBAASA,CAAC;QACN,IAAIgB,eAAeG,OAAOC,KAAK;IACnC,GAAG;QAACJ;KAAc;IAClB,qBACI,oBAACjB,kBAAGA;QACAsB,IAAI;YACAC,QAAQ;YACRC,OAAO;YACPC,SAAS;YACTC,eAAe;YACfC,gBAAgB;QACpB;kBACA,kCAACjD,iBAAiBA;YACdiB,UAAU,IAAMyB,OAAOC,KAAK;YAC5BvB,kBAAkB,IAAMoB,QAAQpC,WAAW,CAAC8C,OAAO,CAAC;oBAAE/C;oBAASC;gBAAY,GAAG+C,OAAO,CAACd;YACtFlC,SAASA;YACTC,aAAaA;;;AAI7B","sources":["webpack://mask-network/./packages/mask/popups/pages/RequestPermission/RequestPermission.tsx","webpack://mask-network/./packages/mask/popups/pages/RequestPermission/index.tsx"],"sourcesContent":["import {\n    Button,\n    List,\n    ListItem,\n    ListItemText,\n    ListSubheader,\n    DialogTitle,\n    DialogActions,\n    DialogContent,\n} from '@mui/material'\nimport { useMaskSharedTrans } from '../../../shared-ui/index.js'\nimport type { Permissions } from 'webextension-polyfill'\n\ninterface RequestPermissionProps extends Permissions.AnyPermissions {\n    onRequestApprove(): void\n    onCancel(): void\n}\nexport function RequestPermission(props: RequestPermissionProps) {\n    const t = useMaskSharedTrans()\n    const { origins, permissions } = props\n    return (\n        <>\n            <DialogTitle>{t.popups_mask_requests_permission()}</DialogTitle>\n            <DialogContent>\n                {origins?.length ? (\n                    <List dense subheader={<ListSubheader>{t.popups_sites()}</ListSubheader>}>\n                        {origins?.map((origin, key) => (\n                            <ListItem key={key}>\n                                <ListItemText primary={origin} />\n                            </ListItem>\n                        ))}\n                    </List>\n                ) : null}\n                {permissions?.length ? (\n                    <List dense subheader={<ListSubheader>{t.popups_permissions()}</ListSubheader>}>\n                        {permissions?.map((permission, key) => (\n                            <ListItem key={key}>\n                                <ListItemText primary={permission} />\n                            </ListItem>\n                        ))}\n                    </List>\n                ) : null}\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={props.onCancel} variant=\"text\">\n                    {t.cancel()}\n                </Button>\n                <Button onClick={props.onRequestApprove} variant=\"contained\">\n                    {t.approve()}\n                </Button>\n            </DialogActions>\n        </>\n    )\n}\n","import { Box } from '@mui/material'\nimport { useEffect } from 'react'\nimport { useLocation } from 'react-router-dom'\nimport { useAsyncRetry } from 'react-use'\nimport { RequestPermission } from './RequestPermission.js'\nimport type { Manifest } from 'webextension-polyfill'\n\nconst CanRequestDynamically: readonly Manifest.OptionalPermission[] = [\n    'clipboardRead',\n    'clipboardWrite',\n    'notifications',\n    'webRequestBlocking',\n]\nfunction canRequestDynamically(x: string): x is Manifest.OptionalPermission {\n    return (CanRequestDynamically as string[]).includes(x)\n}\n\nexport default function RequestPermissionPage() {\n    const location = useLocation()\n    const params = new URLSearchParams(location.search)\n    const origins = params.getAll('origins')\n    const permissions = params.getAll('permissions').filter(canRequestDynamically)\n\n    const { retry, value: hasPermission } = useAsyncRetry(\n        () => browser.permissions.contains({ origins, permissions }),\n        [location.search],\n    )\n\n    useEffect(() => {\n        if (hasPermission) window.close()\n    }, [hasPermission])\n    return (\n        <Box\n            sx={{\n                height: '100vh',\n                width: '100vw',\n                display: 'flex',\n                flexDirection: 'column',\n                justifyContent: 'center',\n            }}>\n            <RequestPermission\n                onCancel={() => window.close()}\n                onRequestApprove={() => browser.permissions.request({ origins, permissions }).finally(retry)}\n                origins={origins}\n                permissions={permissions}\n            />\n        </Box>\n    )\n}\n"],"names":["Button","List","ListItem","ListItemText","ListSubheader","DialogTitle","DialogActions","DialogContent","useMaskSharedTrans","RequestPermission","props","t","origins","permissions","popups_mask_requests_permission","length","dense","subheader","popups_sites","map","origin","key","primary","popups_permissions","permission","onClick","onCancel","variant","cancel","onRequestApprove","approve","Box","useEffect","useLocation","useAsyncRetry","CanRequestDynamically","canRequestDynamically","x","includes","RequestPermissionPage","location","params","URLSearchParams","search","getAll","filter","retry","value","hasPermission","browser","contains","window","close","sx","height","width","display","flexDirection","justifyContent","request","finally"],"sourceRoot":"","x_google_ignoreList":[]}