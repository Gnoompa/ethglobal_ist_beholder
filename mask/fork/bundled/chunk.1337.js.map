{"version":3,"file":"bundled/chunk.1337.js","mappings":"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","sources":["webpack://mask-network/./packages/mask/content-script/site-adaptors/mirror.xyz/collecting/utils.ts","webpack://mask-network/./packages/mask/content-script/site-adaptors/mirror.xyz/utils/user.ts","webpack://mask-network/./packages/mask/content-script/site-adaptors/mirror.xyz/shared.ts","webpack://mask-network/./packages/mask/content-script/site-adaptors/mirror.xyz/collecting/identity.ts","webpack://mask-network/./packages/mask/content-script/site-adaptors/mirror.xyz/utils/selectors.ts","webpack://mask-network/./packages/mask/content-script/site-adaptors/mirror.xyz/injection/Tips/TipsButtonWrapper.tsx","webpack://mask-network/./packages/mask/content-script/site-adaptors/mirror.xyz/injection/Tips/MenuAuthorTipButton.tsx","webpack://mask-network/./packages/mask/content-script/site-adaptors/mirror.xyz/injection/Tips/PostVerification.tsx","webpack://mask-network/./packages/mask/content-script/site-adaptors/mirror.xyz/injection/Tips/ProfilePage.tsx","webpack://mask-network/./packages/mask/content-script/site-adaptors/mirror.xyz/injection/Tips/adjustArticleInfoBar.ts","webpack://mask-network/./packages/mask/content-script/site-adaptors/mirror.xyz/injection/Tips/index.tsx","webpack://mask-network/./packages/mask/content-script/site-adaptors/mirror.xyz/customization/ui-overwrite.ts","webpack://mask-network/./packages/mask/content-script/site-adaptors/mirror.xyz/injection/PostActions/index.tsx","webpack://mask-network/./packages/mask/content-script/site-adaptors/mirror.xyz/collecting/posts.ts","webpack://mask-network/./packages/mask/content-script/site-adaptors/mirror.xyz/collecting/theme.ts","webpack://mask-network/./packages/mask/content-script/site-adaptors/mirror.xyz/customization/custom.ts","webpack://mask-network/./packages/mask/content-script/site-adaptors/mirror.xyz/ui-provider.ts"],"sourcesContent":["import { last } from 'lodash-es'\nimport urlcat from 'urlcat'\nimport { ProfileIdentifier } from '@masknet/shared-base'\nimport type { Writer } from '@masknet/web3-providers/types'\nimport { formatEthereumAddress } from '@masknet/web3-shared-evm'\nimport { mirrorBase } from '../base.js'\n\nexport function getMirrorProfileUrl(id: string) {\n    return urlcat('https://mirror.xyz/:id', { id })\n}\n\nexport function formatWriter(writer: Writer, isOwner: boolean) {\n    return {\n        avatar: writer.avatarURL,\n        nickname: writer.displayName,\n        bio: writer.description,\n        homepage: writer.domain || getMirrorProfileUrl(writer.address),\n        identifier: ProfileIdentifier.of(mirrorBase.networkIdentifier, formatEthereumAddress(writer.address)).unwrapOr(\n            undefined,\n        ),\n        isOwner,\n    }\n}\n\nexport enum MirrorPageType {\n    Profile = 'profile',\n    Collection = 'collection',\n    Post = 'post',\n    Dashboard = 'dashboard',\n}\n\nexport const MIRROR_ENTRY_ID = /[\\w|-]{43}/i\n\nexport function getMirrorPageType(url?: string) {\n    if (!url) return\n\n    if (url.includes(`/${MirrorPageType.Dashboard}`)) return MirrorPageType.Dashboard\n    if (url.includes(`/${MirrorPageType.Collection}`)) return MirrorPageType.Collection\n\n    const urlSplits = url.split('/').filter(Boolean)\n\n    if (MIRROR_ENTRY_ID.test((urlSplits.at(-1) ?? '').trim())) return MirrorPageType.Post\n\n    return MirrorPageType.Profile\n}\n\nexport function getMirrorUserId(href?: string) {\n    if (!href) return null\n\n    const urlObj = new URL(href)\n    const url = urlObj.href.replace(urlObj.search, '').replace(/\\/$/, '')\n\n    const pageType = getMirrorPageType(url)\n\n    // If dashboard, get from local storage\n    if (pageType === MirrorPageType.Dashboard) return localStorage.getItem('mirror.userAddress')\n\n    let tempURL = url\n    if (pageType === MirrorPageType.Collection) {\n        tempURL = url.replace(/\\/collection(.*)/, '')\n    }\n    if (pageType === MirrorPageType.Post) {\n        tempURL = url.replace(/\\/[\\w|-]{43}/i, '')\n    }\n\n    const ens = last(tempURL.match(/https:\\/\\/mirror.xyz\\/(.*)/))\n    if (ens) return ens\n\n    return last(tempURL.match(/https:\\/\\/(.*)\\.mirror\\.xyz/)) as string | null\n}\n","import { Mirror } from '@masknet/web3-providers'\nimport { ProfileIdentifier, type SocialIdentity } from '@masknet/shared-base'\nimport { mirrorBase } from '../base.js'\nimport { getMirrorProfileUrl } from '../collecting/utils.js'\n\nexport async function getUserIdentity(userAddress: string): Promise<SocialIdentity | undefined> {\n    if (!userAddress) return\n    const writer = await Mirror.getWriter(userAddress)\n    if (!writer) return\n\n    return {\n        avatar: writer.avatarURL,\n        nickname: writer.displayName,\n        identifier: ProfileIdentifier.of(mirrorBase.networkIdentifier, writer.address).unwrapOr(undefined),\n        bio: writer.description,\n        homepage: writer.domain || getMirrorProfileUrl(writer.address),\n    }\n}\n","import type { SiteAdaptor } from '@masknet/types'\nimport { createSiteAdaptorSpecializedPostContext } from '../../site-adaptor-infra/utils/create-post-context.js'\nimport { hasPayloadLike } from '../../utils/index.js'\nimport { mirrorBase } from './base.js'\nimport { getUserIdentity } from './utils/user.js'\n\nexport const mirrorShared: SiteAdaptor.Shared & SiteAdaptor.Base = {\n    ...mirrorBase,\n    utils: {\n        createPostContext: createSiteAdaptorSpecializedPostContext({\n            hasPayloadLike,\n        }),\n        getUserIdentity,\n    },\n}\n","import { delay } from '@masknet/kit'\nimport { EnhanceableSite, getCookie } from '@masknet/shared-base'\nimport { Mirror } from '@masknet/web3-providers'\nimport type { Writer } from '@masknet/web3-providers/types'\nimport type { SiteAdaptorUI } from '@masknet/types'\nimport { creator } from '../../../site-adaptor-infra/utils.js'\nimport { formatWriter, getMirrorUserId } from './utils.js'\n\nasync function getCurrentUserInfo() {\n    if (location.host !== EnhanceableSite.Mirror) return\n    const userAddress = getCookie('user_wallet')\n\n    if (!userAddress) return\n    return Mirror.getWriter(userAddress)\n}\n\nfunction resolveLastRecognizedIdentityInner(\n    ref: SiteAdaptorUI.CollectingCapabilities.IdentityResolveProvider['recognized'],\n    cancel: AbortSignal,\n) {\n    const assign = async () => {\n        await delay(2000)\n\n        const writer = await getCurrentUserInfo()\n        if (!writer) return\n\n        ref.value = formatWriter(writer, true)\n    }\n\n    assign()\n\n    window.addEventListener('locationchange', assign, { signal: cancel })\n}\n\nfunction resolveCurrentVisitingIdentityInner(\n    ref: SiteAdaptorUI.CollectingCapabilities.IdentityResolveProvider['recognized'],\n    ownerRef: SiteAdaptorUI.CollectingCapabilities.IdentityResolveProvider['recognized'],\n    cancel: AbortSignal,\n) {\n    const assign = async () => {\n        // get from mirror api\n        const userId = getMirrorUserId(location.href)\n        const ownerId = ownerRef.value.identifier?.userId\n        const isOwner = !!(userId && ownerId && userId.toLowerCase() === ownerId.toLowerCase())\n        if (userId) {\n            const writer = await Mirror.getWriter(userId)\n            if (writer) {\n                ref.value = formatWriter(writer, isOwner)\n                return\n            }\n        }\n        // Could be `/dashboard` or `/dashboard/settings`\n        if (location.pathname.startsWith('/dashboard')) {\n            ref.value = {}\n            return\n        }\n\n        // get from local\n        // why local as second option?\n        // when location change, then __NEXT_DATA__ data could be stale,\n        const script = document.getElementById('__NEXT_DATA__')?.innerHTML\n        if (!script) return\n        const INIT_DATA = JSON.parse(script)\n        if (!INIT_DATA) return\n\n        const writer = (INIT_DATA.props?.pageProps?.publicationLayoutProject ??\n            INIT_DATA.props?.pageProps?.project) as Writer\n        ref.value = formatWriter(writer, isOwner)\n    }\n\n    assign()\n\n    window.addEventListener('locationchange', assign, { signal: cancel })\n}\n\nexport const IdentityProviderMirror: SiteAdaptorUI.CollectingCapabilities.IdentityResolveProvider = {\n    hasDeprecatedPlaceholderName: false,\n    recognized: creator.EmptyIdentityResolveProviderState(),\n    start(cancel) {\n        resolveLastRecognizedIdentityInner(this.recognized, cancel)\n    },\n}\n\nexport const CurrentVisitingIdentityProviderMirror: SiteAdaptorUI.CollectingCapabilities.IdentityResolveProvider = {\n    hasDeprecatedPlaceholderName: false,\n    recognized: creator.EmptyIdentityResolveProviderState(),\n    start(cancel) {\n        resolveCurrentVisitingIdentityInner(this.recognized, IdentityProviderMirror.recognized, cancel)\n    },\n}\n","import { LiveSelector } from '@dimensiondev/holoflows-kit'\n\ntype E = HTMLElement\n\nexport function querySelector<T extends E, SingleMode extends boolean = true>(selector: string, singleMode = true) {\n    const ls = new LiveSelector<T, SingleMode>().querySelector<T>(selector)\n    return (singleMode ? ls.enableSingleMode() : ls) as LiveSelector<T, SingleMode>\n}\n\nfunction querySelectorAll<T extends E>(selector: string) {\n    return new LiveSelector().querySelectorAll<T>(selector)\n}\n\nexport function postsContentSelector() {\n    return querySelectorAll(\n        [\n            // In Entries\n            '[id=\"__next\"] > div:nth-child(2) > div > div:not([class]) > div:not(footer)',\n            // In collection\n            '[id=\"__next\"] > div:nth-child(2) a:has(footer)',\n            '[id=\"__next\"] > div:nth-child(2) a:has(img[alt=\"Card Header\"][loading=\"lazy\"])',\n            // In Entry detail\n            '[id=\"__next\"] > div:nth-child(2) > div:has([class]):not(footer):has(p)',\n        ].join(','),\n    ).filter((x) => x.childNodes.length !== 0)\n}\n\nexport function themeSelector() {\n    return querySelector<E>('[data-theme]')\n}\n","import { memo, useMemo } from 'react'\nimport { EMPTY_LIST, PluginID, type SocialAccount } from '@masknet/shared-base'\nimport { makeStyles } from '@masknet/theme'\nimport type { Web3Helper } from '@masknet/web3-helpers'\nimport { useNetworkContext, useWeb3Others } from '@masknet/web3-hooks-base'\nimport {\n    createInjectHooksRenderer,\n    Plugin,\n    useActivatedPluginsSiteAdaptor,\n    useIsMinimalMode,\n} from '@masknet/plugin-infra/content-script'\nimport { useCurrentVisitingIdentity } from '../../../../components/DataSource/useActivatedUI.js'\n\nconst useStyles = makeStyles()((theme) => ({\n    root: {\n        position: 'relative',\n        marginLeft: theme.spacing(1),\n        height: 40,\n        width: 40,\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        borderWidth: 1,\n        borderStyle: 'solid',\n        borderColor: theme.palette.maskColor.line,\n        borderRadius: 20,\n        marginRight: theme.spacing(1),\n        color: theme.palette.text.primary,\n    },\n}))\n\ninterface Props {\n    slot: Plugin.SiteAdaptor.TipsSlot\n}\nexport const TipsButtonWrapper = memo(function TipsButtonWrapper({ slot }: Props) {\n    const { classes } = useStyles()\n\n    const visitingIdentity = useCurrentVisitingIdentity()\n    const isMinimalMode = useIsMinimalMode(PluginID.Tips)\n    const { pluginID } = useNetworkContext()\n    const Others = useWeb3Others()\n\n    const accounts = useMemo((): Array<SocialAccount<Web3Helper.ChainIdAll>> => {\n        if (!visitingIdentity?.identifier) return EMPTY_LIST\n        return [\n            {\n                pluginID,\n                address: visitingIdentity.identifier.userId,\n                label: visitingIdentity.nickname\n                    ? `(${visitingIdentity.nickname}) ${Others.formatAddress(visitingIdentity.identifier.userId, 4)}`\n                    : visitingIdentity.identifier.userId,\n            },\n        ]\n    }, [visitingIdentity, Others.formatAddress])\n\n    const component = useMemo(() => {\n        const Component = createInjectHooksRenderer(\n            useActivatedPluginsSiteAdaptor.visibility.useNotMinimalMode,\n            (plugin) => plugin.TipsRealm?.UI?.Content,\n        )\n\n        return <Component identity={visitingIdentity.identifier} slot={slot} accounts={accounts} />\n    }, [visitingIdentity.identifier, accounts, slot])\n\n    if (!component || !visitingIdentity.identifier || isMinimalMode || location.pathname === '/') return null\n\n    return (\n        <span className={slot === Plugin.SiteAdaptor.TipsSlot.MirrorMenu ? classes.root : undefined}>{component}</span>\n    )\n})\n","import { MutationObserverWatcher } from '@dimensiondev/holoflows-kit'\nimport { Plugin } from '@masknet/plugin-infra'\nimport { DefaultWeb3ContextProvider } from '@masknet/web3-hooks-base'\nimport { attachReactTreeWithContainer } from '../../../../utils/shadow-root/renderInShadowRoot.js'\nimport { startWatch } from '../../../../utils/startWatch.js'\nimport { querySelector } from '../../utils/selectors.js'\nimport { TipsButtonWrapper } from './TipsButtonWrapper.js'\n\nfunction selector() {\n    return querySelector(\n        [\n            'div:has(> div > button[data-state=\"closed\"]) a', // More reliable\n            '.GlobalNavigation a[href=\"/\"]',\n            'div[style$=\"height: 56px;\"] a',\n        ].join(','),\n    )\n}\n\nexport function injectOnMenu(signal: AbortSignal) {\n    const watcher = new MutationObserverWatcher(selector())\n    startWatch(watcher, signal)\n    attachReactTreeWithContainer(watcher.firstDOMProxy.afterShadow, { signal }).render(\n        <DefaultWeb3ContextProvider>\n            <TipsButtonWrapper slot={Plugin.SiteAdaptor.TipsSlot.MirrorMenu} />\n        </DefaultWeb3ContextProvider>,\n    )\n}\n","import { MutationObserverWatcher } from '@dimensiondev/holoflows-kit'\nimport { Plugin } from '@masknet/plugin-infra'\nimport { DefaultWeb3ContextProvider } from '@masknet/web3-hooks-base'\nimport { attachReactTreeWithContainer } from '../../../../utils/shadow-root.js'\nimport { startWatch } from '../../../../utils/startWatch.js'\nimport { querySelector } from '../../utils/selectors.js'\nimport { TipsButtonWrapper } from './TipsButtonWrapper.js'\n\nfunction selector() {\n    const authorWallet = location.pathname.split('/')[1].toLowerCase()\n    return querySelector(`#__next a[href$=\"/address/${authorWallet}\" i] div:nth-child(2)`)\n}\n\nexport function injectOnVerification(signal: AbortSignal) {\n    const watcher = new MutationObserverWatcher(selector())\n    startWatch(watcher, signal)\n    attachReactTreeWithContainer(watcher.firstDOMProxy.afterShadow, { signal }).render(\n        <DefaultWeb3ContextProvider>\n            <TipsButtonWrapper slot={Plugin.SiteAdaptor.TipsSlot.MirrorVerification} />\n        </DefaultWeb3ContextProvider>,\n    )\n}\n","import { MutationObserverWatcher } from '@dimensiondev/holoflows-kit'\nimport { Plugin } from '@masknet/plugin-infra'\nimport { DefaultWeb3ContextProvider } from '@masknet/web3-hooks-base'\nimport { attachReactTreeWithContainer } from '../../../../utils/shadow-root.js'\nimport { startWatch } from '../../../../utils/startWatch.js'\nimport { querySelector } from '../../utils/selectors.js'\nimport { TipsButtonWrapper } from './TipsButtonWrapper.js'\n\nfunction selector() {\n    const authorWallet = location.pathname.split('/')[1].toLowerCase()\n    // Only the address link\n    return querySelector(\n        [\n            `#__next div:has(h2) ~ div a[href$=\"/address/${authorWallet}\" i]`, // address\n            `#__next div:has(h2) ~ div a[href$=\"search=${authorWallet}\" i]`, // ENS\n        ].join(','),\n    )\n}\n\nexport function injectTipsButtonOnProfile(signal: AbortSignal) {\n    const watcher = new MutationObserverWatcher(selector())\n    startWatch(watcher, signal)\n    attachReactTreeWithContainer(watcher.firstDOMProxy.afterShadow, { signal }).render(\n        <DefaultWeb3ContextProvider>\n            <TipsButtonWrapper slot={Plugin.SiteAdaptor.TipsSlot.MirrorVerification} />\n        </DefaultWeb3ContextProvider>,\n    )\n}\n","function selector() {\n    const authorWallet = location.pathname.split('/')[1].toLowerCase()\n    return `#__next div:has(> div > a[href$=\"mirror.xyz/${authorWallet}\" i] button[data-state] img[alt^=\"0x\" i]) + div`\n}\n\nexport function adjustArticleInfoBar(signal: AbortSignal) {\n    const node = document.querySelector<HTMLDivElement>(selector())\n    if (!node) return\n    const timer = setInterval(() => {\n        if (node.offsetWidth !== node.parentElement?.offsetWidth) return\n        node.style.justifyContent = 'flex-start'\n        clearInterval(timer)\n    }, 250)\n    signal.addEventListener('abort', () => clearInterval(timer))\n}\n","import { injectOnMenu } from './MenuAuthorTipButton.js'\nimport { injectOnVerification } from './PostVerification.js'\nimport { injectTipsButtonOnProfile as injectOnProfile } from './ProfilePage.js'\nimport { adjustArticleInfoBar } from './adjustArticleInfoBar.js'\n\nexport function injectTips(signal: AbortSignal) {\n    injectOnMenu(signal)\n    injectOnProfile(signal)\n    injectOnVerification(signal)\n    adjustArticleInfoBar(signal)\n}\n","/* eslint-disable tss-unused-classes/unused-classes */\nimport { makeStyles } from '@masknet/theme'\n\nexport const useInjectedDialogClassesOverwriteMirror = makeStyles()((theme) => {\n    const smallQuery = `@media (max-width: ${theme.breakpoints.values.sm}px)`\n    return {\n        root: {\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            [smallQuery]: {\n                display: 'block !important',\n            },\n        },\n        container: {\n            alignItems: 'center',\n        },\n        paper: {\n            width: '600px !important',\n            minHeight: 400,\n            maxHeight: 620,\n            maxWidth: 'none',\n            boxShadow: 'none',\n            backgroundImage: 'none',\n            [smallQuery]: {\n                display: 'block !important',\n                margin: 12,\n            },\n            '&::-webkit-scrollbar': {\n                display: 'none',\n            },\n        },\n        dialogTitle: {\n            display: 'grid',\n            gridTemplateColumns: '1fr auto 1fr',\n            alignItems: 'center',\n            padding: 16,\n            position: 'relative',\n            background: theme.palette.maskColor.modalTitleBg,\n            borderBottom: 'none',\n            '& > p': {\n                fontSize: 18,\n                lineHeight: '22px',\n                display: 'inline-block',\n                whiteSpace: 'nowrap',\n                overflow: 'hidden',\n                textOverflow: 'ellipsis',\n            },\n            [smallQuery]: {\n                display: 'flex',\n                justifyContent: 'start',\n                maxWidth: 600,\n                margin: '0 auto',\n                padding: '7px 14px 6px 11px !important',\n            },\n        },\n        dialogContent: {\n            backgroundColor: theme.palette.maskColor.bottom,\n            [smallQuery]: {\n                display: 'flex',\n                flexDirection: 'column',\n                maxWidth: 600,\n                margin: '0 auto',\n                padding: '7px 14px 6px',\n            },\n        },\n        dialogActions: {\n            backgroundColor: theme.palette.maskColor.bottom,\n            padding: '6px 16px',\n            [smallQuery]: {\n                display: 'flex',\n                flexDirection: 'column',\n                justifyContent: 'space-between',\n                maxWidth: 600,\n                margin: '0 auto',\n                padding: '7px 14px 6px !important',\n            },\n        },\n        dialogBackdropRoot: {\n            backgroundColor: theme.palette.action.mask,\n        },\n    }\n})\n","import { noop } from 'lodash-es'\nimport { Plugin } from '@masknet/plugin-infra'\nimport {\n    createInjectHooksRenderer,\n    type PostInfo,\n    PostInfoProvider,\n    useActivatedPluginsSiteAdaptor,\n    usePostInfoDetails,\n} from '@masknet/plugin-infra/content-script'\nimport { DefaultWeb3ContextProvider, useWeb3Others } from '@masknet/web3-hooks-base'\nimport { NetworkPluginID } from '@masknet/shared-base'\nimport { Flags } from '@masknet/flags'\nimport { attachReactTreeWithContainer } from '../../../../utils/shadow-root/renderInShadowRoot.js'\n\nconst ActionsRenderer = createInjectHooksRenderer(\n    useActivatedPluginsSiteAdaptor.visibility.useNotMinimalMode,\n    (plugin) => plugin.TipsRealm?.UI?.Content,\n)\n\nfunction PostActions() {\n    const Others = useWeb3Others()\n\n    const identifier = usePostInfoDetails.author()\n    const nickname = usePostInfoDetails.nickname() as string | null\n    const coAuthors = usePostInfoDetails.coAuthors()\n\n    if (!identifier) return null\n    return (\n        <ActionsRenderer\n            // In Mirror, then profile identifier is wallet address\n            accounts={[\n                {\n                    pluginID: NetworkPluginID.PLUGIN_EVM,\n                    address: identifier.userId,\n                    label: nickname ? `(${nickname}) ${Others.formatAddress(identifier.userId, 4)}` : identifier.userId,\n                },\n                ...(coAuthors?.map((x) => ({\n                    pluginID: NetworkPluginID.PLUGIN_EVM,\n                    address: x.author.userId,\n                    label: x.nickname ? `(${x.nickname}) ${Others.formatAddress(x.author.userId, 4)}` : x.author.userId,\n                })) ?? []),\n            ]}\n            identity={identifier}\n            slot={Plugin.SiteAdaptor.TipsSlot.MirrorEntry}\n        />\n    )\n}\n\nfunction createPostActionsInjector() {\n    return function injectPostActions(postInfo: PostInfo, signal: AbortSignal) {\n        const jsx = (\n            <DefaultWeb3ContextProvider>\n                <PostInfoProvider post={postInfo}>\n                    <PostActions />\n                </PostInfoProvider>\n            </DefaultWeb3ContextProvider>\n        )\n        if (postInfo.actionsElement) {\n            const root = attachReactTreeWithContainer(postInfo.actionsElement.afterShadow, {\n                key: 'post-actions',\n                signal,\n            })\n\n            root.render(jsx)\n            return root.destroy\n        }\n        return noop\n    }\n}\n\nexport function injectPostActionsAtMirror(signal: AbortSignal, postInfo: PostInfo) {\n    if (!Flags.post_actions_enabled) return\n    const injector = createPostActionsInjector()\n    return injector(postInfo, signal)\n}\n","import { DOMProxy, MutationObserverWatcher } from '@dimensiondev/holoflows-kit'\nimport { Mirror } from '@masknet/web3-providers'\nimport type { PostContextCoAuthor } from '@masknet/plugin-infra/content-script'\nimport type { SiteAdaptorUI } from '@masknet/types'\nimport { creator } from '../../../site-adaptor-infra/index.js'\nimport { postsContentSelector } from '../utils/selectors.js'\nimport { mirrorShared } from '../shared.js'\nimport { startWatch } from '../../../utils/startWatch.js'\nimport { createRefsForCreatePostContext } from '../../../site-adaptor-infra/utils/create-post-context.js'\nimport { formatWriter, getMirrorPageType, MirrorPageType, MIRROR_ENTRY_ID } from './utils.js'\nimport { PostIdentifier } from '@masknet/shared-base'\n\nconst MIRROR_LINK_PREFIX = /https(.*)mirror.xyz(.*)\\//i\n\nfunction queryInjectPoint(node: HTMLElement) {\n    // Could be ENS or address\n    const authorWallet = location.pathname.split('/')[1].toLowerCase()\n    const allANode = node.querySelectorAll(\n        [\n            // post detail header\n            `:scope [href$=\"/${authorWallet}\" i]:has(img[alt^=\"0x\" i][decoding=\"async\"]) > div:last-of-type`, // img alt is always address\n            // collection page card footer\n            ':scope header div:has(> span img[alt=\"Publisher\"])',\n        ].join(','),\n    )\n    return allANode.item(allANode.length - 1) as HTMLElement\n}\n\nfunction getPostId(node: HTMLElement | HTMLLinkElement) {\n    // Handle entry detail page post id\n    if (getMirrorPageType(location.href) === MirrorPageType.Post) {\n        return location.pathname.match(MIRROR_ENTRY_ID)?.[0]\n    }\n\n    const ele = node.querySelector<HTMLLinkElement>('div > a')\n    const href = ele?.href || (node as HTMLLinkElement)?.href\n\n    if (href?.startsWith('https')) {\n        return href.replace(MIRROR_LINK_PREFIX, '')\n    }\n\n    if (href) return href?.replace('/', '')\n\n    return ''\n}\n\nasync function collectPostInfo(node: HTMLElement | null, cancel: AbortSignal) {\n    if (!node) return\n    if (cancel?.aborted) return\n    const postId = getPostId(node)\n    if (!postId) return\n    const publisher = await Mirror.getPostPublisher(postId)\n    if (!publisher) return\n    return {\n        postId,\n        writers: {\n            author: formatWriter(publisher.author, false),\n            coAuthors: publisher?.coAuthors.map((x) => formatWriter(x, false)),\n        },\n    }\n}\n\nasync function registerPostCollectorInner(\n    postStore: SiteAdaptorUI.CollectingCapabilities.PostsProvider['posts'],\n    cancel: AbortSignal,\n) {\n    startWatch(\n        new MutationObserverWatcher<HTMLElement>(postsContentSelector()).useForeach((node, key, proxy) => {\n            if (!node) return\n\n            const actionsElementProxy = DOMProxy({})\n            actionsElementProxy.realCurrent = queryInjectPoint(node)\n\n            const refs = createRefsForCreatePostContext()\n            const postInfo = mirrorShared.utils.createPostContext({\n                actionsElement: actionsElementProxy,\n                comments: undefined,\n                rootElement: proxy,\n                suggestedInjectionPoint: (node.lastElementChild as HTMLElement) || node,\n                ...refs.subscriptions,\n            })\n\n            function run() {\n                collectPostInfo(node, cancel).then((result) => {\n                    if (!result) return\n\n                    refs.postID.value = result.postId\n                    refs.postBy.value = result.writers?.author.identifier || null\n                    refs.nickname.value = result.writers?.author.nickname || null\n                    refs.avatarURL.value = result.writers?.author.avatar || null\n                    refs.postCoAuthors.value =\n                        result?.writers?.coAuthors\n                            .map(\n                                (x): PostContextCoAuthor =>\n                                    x.identifier\n                                        ? {\n                                              author: x.identifier,\n                                              avatarURL: x.avatar ? new URL(x.avatar) : undefined,\n                                              post: new PostIdentifier(x.identifier, result.postId),\n                                              nickname: x.nickname,\n                                          }\n                                        : undefined!,\n                            )\n                            .filter(Boolean) || []\n                })\n            }\n            run()\n\n            postStore.set(proxy, postInfo)\n\n            return {\n                onNodeMutation: run,\n                onTargetChanged: run,\n                onRemove: () => postStore.delete(proxy),\n            }\n        }),\n        cancel,\n    )\n}\n\nexport const PostProviderMirror: SiteAdaptorUI.CollectingCapabilities.PostsProvider = {\n    posts: creator.EmptyPostProviderState(),\n    start(cancel) {\n        registerPostCollectorInner(this.posts, cancel)\n    },\n}\n","import { MutationObserverWatcher } from '@dimensiondev/holoflows-kit'\nimport type { SiteAdaptorUI } from '@masknet/types'\nimport { ThemeMode } from '@masknet/web3-shared-base'\nimport { creator } from '../../../site-adaptor-infra/utils.js'\nimport { themeSelector } from '../utils/selectors.js'\n\nfunction resolveThemeSettingsInner(\n    ref: SiteAdaptorUI.CollectingCapabilities.ThemeSettingsProvider['recognized'],\n    cancel: AbortSignal,\n) {\n    function updateThemeColor() {\n        ref.value = {\n            ...ref.value,\n            mode: (document.documentElement.dataset.theme as ThemeMode) ?? ThemeMode.Light,\n        }\n    }\n\n    updateThemeColor()\n\n    new MutationObserverWatcher(themeSelector())\n        .addListener('onAdd', updateThemeColor)\n        .addListener('onChange', updateThemeColor)\n        .startWatch({ childList: true, subtree: true }, cancel)\n}\n\nexport const ThemeSettingsProviderMirror: SiteAdaptorUI.CollectingCapabilities.ThemeSettingsProvider = {\n    recognized: creator.EmptyThemeSettingsProviderState(),\n    async start(cancel) {\n        resolveThemeSettingsInner(this.recognized, cancel)\n    },\n}\n","import { useMemo } from 'react'\nimport { produce, setAutoFreeze } from 'immer'\nimport { type Theme, unstable_createMuiStrictModeTheme } from '@mui/material'\nimport { useThemeSettings } from '../../../components/DataSource/useActivatedUI.js'\n\nexport function useThemeMirrorVariant(baseTheme: Theme) {\n    const themeSettings = useThemeSettings()\n\n    return useMemo(() => {\n        setAutoFreeze(false)\n\n        const MirrorTheme = produce(baseTheme, (theme) => {\n            theme.components = theme.components || {}\n            theme.components.MuiTypography = {\n                styleOverrides: {\n                    root: {\n                        fontFamily:\n                            '\"Inter var\",system-ui,-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial,\"Noto Sans\",sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",\"Noto Color Emoji\"',\n                    },\n                },\n            }\n        })\n        setAutoFreeze(true)\n        return unstable_createMuiStrictModeTheme(MirrorTheme)\n    }, [baseTheme, themeSettings])\n}\n","import type { SiteAdaptorUI } from '@masknet/types'\nimport { stateCreator } from '../../site-adaptor-infra/utils.js'\nimport { injectPageInspectorDefault } from '../../site-adaptor-infra/defaults/index.js'\nimport { InitAutonomousStateProfiles } from '../../site-adaptor-infra/defaults/state/InitProfiles.js'\n\nimport { mirrorBase } from './base.js'\nimport { mirrorShared } from './shared.js'\nimport { CurrentVisitingIdentityProviderMirror, IdentityProviderMirror } from './collecting/identity.js'\nimport { injectTips } from './injection/Tips/index.js'\nimport { useInjectedDialogClassesOverwriteMirror } from './customization/ui-overwrite.js'\nimport { injectPostActionsAtMirror } from './injection/PostActions/index.js'\nimport { PostProviderMirror } from './collecting/posts.js'\nimport { ThemeSettingsProviderMirror } from './collecting/theme.js'\nimport { useThemeMirrorVariant } from './customization/custom.js'\n\n// TODO: access chrome permission\nconst define: SiteAdaptorUI.Definition = {\n    ...mirrorBase,\n    ...mirrorShared,\n    automation: {},\n    collecting: {\n        identityProvider: IdentityProviderMirror,\n        currentVisitingIdentityProvider: CurrentVisitingIdentityProviderMirror,\n        postsProvider: PostProviderMirror,\n        themeSettingsProvider: ThemeSettingsProviderMirror,\n    },\n    configuration: {\n        tipsConfig: {\n            enableUserGuide: true,\n        },\n    },\n    customization: {\n        sharedComponentOverwrite: {\n            InjectedDialog: {\n                classes: useInjectedDialogClassesOverwriteMirror,\n            },\n        },\n        useTheme: useThemeMirrorVariant,\n    },\n    init(signal) {\n        const profiles = stateCreator.profiles()\n        InitAutonomousStateProfiles(signal, profiles, mirrorShared.networkIdentifier)\n        return { profiles }\n    },\n    injection: {\n        pageInspector: injectPageInspectorDefault(),\n        postActions: injectPostActionsAtMirror,\n        tips: injectTips,\n    },\n}\nexport default define\n"],"names":["last","urlcat","ProfileIdentifier","formatEthereumAddress","mirrorBase","getMirrorProfileUrl","id","formatWriter","writer","isOwner","avatar","avatarURL","nickname","displayName","bio","description","homepage","domain","address","identifier","of","networkIdentifier","unwrapOr","undefined","MirrorPageType","Profile","Collection","Post","Dashboard","MIRROR_ENTRY_ID","getMirrorPageType","url","includes","urlSplits","split","filter","Boolean","test","at","trim","getMirrorUserId","href","urlObj","URL","replace","search","pageType","localStorage","getItem","tempURL","ens","match","Mirror","getUserIdentity","userAddress","getWriter","createSiteAdaptorSpecializedPostContext","hasPayloadLike","mirrorShared","utils","createPostContext","delay","EnhanceableSite","getCookie","creator","getCurrentUserInfo","location","host","resolveLastRecognizedIdentityInner","ref","cancel","assign","value","window","addEventListener","signal","resolveCurrentVisitingIdentityInner","ownerRef","userId","ownerId","toLowerCase","pathname","startsWith","script","document","getElementById","innerHTML","INIT_DATA","JSON","parse","props","pageProps","publicationLayoutProject","project","IdentityProviderMirror","hasDeprecatedPlaceholderName","recognized","EmptyIdentityResolveProviderState","start","CurrentVisitingIdentityProviderMirror","LiveSelector","querySelector","selector","singleMode","ls","enableSingleMode","querySelectorAll","postsContentSelector","join","x","childNodes","length","themeSelector","memo","useMemo","EMPTY_LIST","PluginID","makeStyles","useNetworkContext","useWeb3Others","createInjectHooksRenderer","Plugin","useActivatedPluginsSiteAdaptor","useIsMinimalMode","useCurrentVisitingIdentity","useStyles","theme","root","position","marginLeft","spacing","height","width","display","justifyContent","alignItems","borderWidth","borderStyle","borderColor","palette","maskColor","line","borderRadius","marginRight","color","text","primary","TipsButtonWrapper","slot","classes","visitingIdentity","isMinimalMode","Tips","pluginID","Others","accounts","label","formatAddress","component","Component","visibility","useNotMinimalMode","plugin","TipsRealm","UI","Content","identity","span","className","SiteAdaptor","TipsSlot","MirrorMenu","MutationObserverWatcher","DefaultWeb3ContextProvider","attachReactTreeWithContainer","startWatch","injectOnMenu","watcher","firstDOMProxy","afterShadow","render","authorWallet","injectOnVerification","MirrorVerification","injectTipsButtonOnProfile","adjustArticleInfoBar","node","timer","setInterval","offsetWidth","parentElement","style","clearInterval","injectOnProfile","injectTips","useInjectedDialogClassesOverwriteMirror","smallQuery","breakpoints","values","sm","container","paper","minHeight","maxHeight","maxWidth","boxShadow","backgroundImage","margin","dialogTitle","gridTemplateColumns","padding","background","modalTitleBg","borderBottom","fontSize","lineHeight","whiteSpace","overflow","textOverflow","dialogContent","backgroundColor","bottom","flexDirection","dialogActions","dialogBackdropRoot","action","mask","noop","PostInfoProvider","usePostInfoDetails","NetworkPluginID","Flags","ActionsRenderer","PostActions","author","coAuthors","PLUGIN_EVM","map","MirrorEntry","createPostActionsInjector","injectPostActions","postInfo","jsx","post","actionsElement","key","destroy","injectPostActionsAtMirror","post_actions_enabled","injector","DOMProxy","createRefsForCreatePostContext","PostIdentifier","MIRROR_LINK_PREFIX","queryInjectPoint","allANode","item","getPostId","ele","collectPostInfo","aborted","postId","publisher","getPostPublisher","writers","registerPostCollectorInner","postStore","useForeach","proxy","actionsElementProxy","realCurrent","refs","comments","rootElement","suggestedInjectionPoint","lastElementChild","subscriptions","run","then","result","postID","postBy","postCoAuthors","set","onNodeMutation","onTargetChanged","onRemove","delete","PostProviderMirror","posts","EmptyPostProviderState","ThemeMode","resolveThemeSettingsInner","updateThemeColor","mode","documentElement","dataset","Light","addListener","childList","subtree","ThemeSettingsProviderMirror","EmptyThemeSettingsProviderState","produce","setAutoFreeze","unstable_createMuiStrictModeTheme","useThemeSettings","useThemeMirrorVariant","baseTheme","themeSettings","MirrorTheme","components","MuiTypography","styleOverrides","fontFamily","stateCreator","injectPageInspectorDefault","InitAutonomousStateProfiles","define","automation","collecting","identityProvider","currentVisitingIdentityProvider","postsProvider","themeSettingsProvider","configuration","tipsConfig","enableUserGuide","customization","sharedComponentOverwrite","InjectedDialog","useTheme","init","profiles","injection","pageInspector","postActions","tips"],"sourceRoot":"","x_google_ignoreList":[]}